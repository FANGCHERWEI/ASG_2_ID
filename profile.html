<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="shortcut icon" type="image/png" href="./assets/img/logo.png" />
</head>

<body>
    <div class="container-fluid px-0">
        <nav class="sidenav-wrapper sidenav-open" id="sidenav">
            <i class="material-icons close-sidenav-btn" id="close-sidenav-btn">close</i>
            <ul class="sidenav">
                <li class="sidenav-item">
                    <a class="sidenav-link" href="spending.html">
                        <i class="material-icons">attach_money</i>
                        <span>spending</span>
                    </a>
                </li>
                <li class="sidenav-item">
                    <a class="sidenav-link" href="analytics.html">
                        <i class="material-icons">insights</i>
                        <span>analytics</span>
                    </a>
                </li>
                <li class="sidenav-item sidenav-item-active">
                    <a class="sidenav-link" href="profile.html">
                        <i class="material-icons">account_circle</i>
                        <span>profile</span>
                    </a>
                </li>
            </ul>
            <div class="sidenav-item" id="logout-btn">
                <i class="material-icons">login</i>
                <span class="sidenav-link">logout</span>
            </div>
        </nav>

        <main class="app">
            <div class="d-flex align-items-center mb-5">
                <i class="material-icons sidenav-toggle-btn" id="sidenav-toggle-btn">menu</i>
                <h1 class="app-title-primary">About you</h1>
            </div>

            <section>
                <form class="form col-lg-6 px-0 mb-3" id="profile-form">
                    <div class="form-input-wrapper w-100">
                        <label for="name">
                            <h4>Name</h4>
                        </label>
                        <input class="form-input form-input-light" required type="text" name="name" id="name-input"
                            placeholder="E.g. John" />
                    </div>
                    <div class="form-input-wrapper w-100">
                        <label for="name">
                            <h4>Email</h4>
                        </label>
                        <input class="form-input form-input-light" id="email-input" type="text" name="email" disabled />
                    </div>
                </form>
                <div id="error" class="error mb-3"></div>
                <div id="success" class="success mb-3"></div>
                <div class="profile-img col-lg-6 mt-5">
                    <img src="assets/img/profile.png" />
                </div>
                <button class="btn primary-btn mt-5 save-btn" id="save-profile-btn">
                    <span>Save</span>
                </button>
            </section>
        </main>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
    <!-- Firebase Auth-->
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-auth.js"></script>
    <!-- Firebase Firestore-->
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-firestore.js"></script>

    <script src="js/firebase.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/validator.js"></script>
    <script src="js/user.js"></script>
    <script src="js/index.js"></script>
    <script>
        $(document).ready(function () {
            $("#error").hide();
            $("#success").hide();

            // Set up save profile button
            $("#save-profile-btn").click(function (e) {
                e.preventDefault();
                const name = $("#profile-form").find("input[name='name']").val();
                updateName(localStorage.getItem("uid"), name);
            });

            // Display email and name
            $("#email-input").val(localStorage.getItem("email"));
            $("#name-input").val(localStorage.getItem("name"));
        });
    </script>
</body>

</html>